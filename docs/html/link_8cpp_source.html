<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DynaMapp: DynaMapp/manipulator/link.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DynaMapp
   </div>
   <div id="projectbrief">Â© Dynamium Robotic Dynamic Identification Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('link_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">link.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="link_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#include &quot;<a class="code" href="link_8hpp.html">link.hpp</a>&quot;</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacemanipulator.html">manipulator</a>{ </div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00006" data-start="{" data-end="}">
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a1e89f030936b92c8633503848cbc6578">    6</a></span><span class="keyword">inline</span> <a class="code hl_function" href="classmanipulator_1_1_link.html#a1e89f030936b92c8633503848cbc6578">Link&lt;Real, Int&gt;::Link</a>(<span class="keyword">const</span> Int       joint_type, </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span>                            <span class="keyword">const</span> Real       q,</div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span>                            <span class="keyword">const</span> Real       d, </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span>                            <span class="keyword">const</span> Real       a, </div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span>                            <span class="keyword">const</span> Real       alpha, </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span>                            <span class="keyword">const</span> Real       mass, </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span>                            <span class="keyword">const</span> Vector3d   r,</div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span>                            <span class="keyword">const</span> Matrix3d   I, </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>                            <span class="keyword">const</span> Int        ratio, </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span>                            <span class="keyword">const</span> Real       couloumb,</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>                            <span class="keyword">const</span> Real       stribek, </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>                            <span class="keyword">const</span> Real       <a class="code hl_namespace" href="namespacedamping.html">damping</a>, </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>                            <span class="keyword">const</span> <span class="keywordtype">bool</span>       static_ = <span class="keyword">false</span>, </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>                            <span class="keyword">const</span> Real       mx,</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>                            <span class="keyword">const</span> Real       my, </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>                            <span class="keyword">const</span> Real       mz,</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>                            <span class="keyword">const</span> Real       q_max, </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>                            <span class="keyword">const</span> Real       q_min, </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>                            <span class="keyword">const</span> Real       joint_offset,</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>                            <span class="keyword">const</span> Real       Jm, </div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>                            <span class="keyword">const</span> Real       temperature)</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>{</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>    this-&gt;joint_type = joint_type;</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>    this-&gt;kv = 125;  </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>    this-&gt;kt = 0.076;</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    this-&gt;a0 = 0.02;</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    this-&gt;a1 = 0.02;</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    this-&gt;a2 = 0.02;</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    this-&gt;c0 = 0.118;</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    this-&gt;c1 = 0.0187;</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    this-&gt;c2 = 0.0101;</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    this-&gt;qp = 0.0 ;</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    this-&gt;qpm = 0.0 ;</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    this-&gt;qpp = 0.0;</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    this-&gt;qppm = 0.0;</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    this-&gt;sensor_stiffness = 266;</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    this-&gt;vs = 0.14;</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    this-&gt;damping = <a class="code hl_namespace" href="namespacedamping.html">damping</a>;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    this-&gt;alpha   = alpha;</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    this-&gt;a       = a;</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    this-&gt;d       = d;</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    this-&gt;ratio   = ratio;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    this-&gt;coulomb = couloumb;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    this-&gt;static_ = static_;</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    this-&gt;stribek = stribek;</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    this-&gt;mass    = mass; </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    this-&gt;q_max = q_max;</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    this-&gt;q_min = q_min;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    this-&gt;joint_offset =joint_offset;</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    this-&gt;r=r;</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    this-&gt;I=I;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    this-&gt;sigma0 = 0.015;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    this-&gt;sigma1 = 0.15;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    this-&gt;sigma2 = 0.12;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    this-&gt;t= 0;</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    this-&gt;R.setZero(3,3);</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    this-&gt;p.setZero(3,1);</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    this-&gt;T.setZero(4,4);</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <span class="keywordflow">if</span> (joint_type == 0){</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>        this-&gt;q += joint_offset;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    }</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="keywordflow">else</span>{</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>        this-&gt;d += joint_offset;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    }</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    Real ct, st, ca, sa;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    ct = cos(this-&gt;q);</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    st = sin(this-&gt;q);</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    ca = cos(this-&gt;alpha);</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    sa = sin(this-&gt;alpha);</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    this-&gt;R(1,1) = ct;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    this-&gt;R(2,1) = st;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    this-&gt;R(3,1) = 0.0;</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    this-&gt;R(1,2) = -ca*st;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    this-&gt;R(2,2) = ca*ct;</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    this-&gt;R(3,2) = sa;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    this-&gt;R(1,3) = sa*st;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    this-&gt;R(2,3) = -sa*ct;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    this-&gt;R(3,3) = ca;</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span> </div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    this-&gt;p(1) = a*ct;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    this-&gt;p(2) = a*st;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    this-&gt;p(3) = d;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    this-&gt;mc(1) = mx;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    this-&gt;mc(2) = my;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    this-&gt;mc(3) = mz;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    this-&gt;temperature_depandancy = false ;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    this-&gt;tau_m_max = 17.00;</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    this-&gt;T&lt;&lt; R, p </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>              0, 1; </div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>}</div>
</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span> </div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a15cd1b6c7263114342ce987b88f75d0a">  102</a></span><a class="code hl_function" href="classmanipulator_1_1_link.html#a15cd1b6c7263114342ce987b88f75d0a">Link&lt;Real, Int&gt;::~Link</a>(){}</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00105" data-start="{" data-end="}">
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#aa870f9c1106573143616db03cf324ee2">  105</a></span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classmanipulator_1_1_link.html#aa870f9c1106573143616db03cf324ee2">Link&lt;Real, Int&gt;::transform</a>(<span class="keyword">const</span> Real&amp; q_){</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="keywordflow">if</span>(this-&gt;joint_type == 0){ <span class="comment">// revolute joint  </span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>        Real ct, st, ca, sa;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>        this-&gt;q = this-&gt;q + this-&gt;joint_offset;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>        ct = cos(this-&gt;q);</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>        st = sin(this-&gt;q);</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        ca = this-&gt;R(3,3);</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>        sa = this-&gt;R(3,2);</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>        this-&gt;R(1,1) = ct;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        this-&gt;R(2,1) = st;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>        this-&gt;R(1,2) = -ca*st;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        this-&gt;R(2,2) = ca*ct;</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>        this-&gt;R(1,3) = sa*st;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        this-&gt;R(2,3) = -sa*ct;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>        this-&gt;p(1) = this-&gt;a*ct;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>        this-&gt;p(2) = this-&gt;a*st;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>        }</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>      <span class="keywordflow">else</span>{ <span class="comment">// prismatic joint</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>        this-&gt;p(3) = this-&gt;q + this-&gt;joint_offset;</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>        this-&gt;d = this-&gt;q + this-&gt;joint_offset;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>      }</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>}</div>
</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span> </div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00131" data-start="{" data-end="}">
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a7d1dd68c3780d89c1c79c6d307eb5e45">  131</a></span>Real <a class="code hl_function" href="classmanipulator_1_1_link.html#a7d1dd68c3780d89c1c79c6d307eb5e45">Link&lt;Real, Int&gt;::get_q</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="keywordflow">if</span> (this-&gt;joint_type == 0){</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        <span class="keywordflow">return</span> (this-&gt;q - this-&gt;joint_offset);</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    }<span class="keywordflow">else</span>{</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <span class="keywordflow">return</span> (this-&gt;d - this-&gt;joint_offset);</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    } </div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>}</div>
</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00140" data-start="{" data-end="}">
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#ab2210a63fe14b7923a1a8bf32700366e">  140</a></span><span class="keywordtype">void</span>  <a class="code hl_function" href="classmanipulator_1_1_link.html#ab2210a63fe14b7923a1a8bf32700366e">Link&lt;Real, Int&gt;::set_q</a>(Real q_){</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    <span class="keywordflow">if</span> (this-&gt;joint_type == 0){</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>        this-&gt;q = q_ + this-&gt;joint_offset;</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    }<span class="keywordflow">else</span>{</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>        this-&gt;d=q_ + this-&gt;joint_offset;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    }</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>}</div>
</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a76f32366b2938f97ddb3c08079344f0e">  149</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmanipulator_1_1_link.html#a76f32366b2938f97ddb3c08079344f0e">Link&lt;Real, Int&gt;::set_kv</a>(Real kv_) { this-&gt;kv = kv_; }</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a80f8d5cac771de738b956e1b44e6a740">  152</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmanipulator_1_1_link.html#a80f8d5cac771de738b956e1b44e6a740">Link&lt;Real, Int&gt;::set_kt</a>(Real kt_){this-&gt;kt = kt_;}</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span> </div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00155" data-start="{" data-end="}">
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#aef55bd1f241ef9037058347dbcfe0ffb">  155</a></span><span class="keywordtype">void</span>  <a class="code hl_function" href="classmanipulator_1_1_link.html#aef55bd1f241ef9037058347dbcfe0ffb">Link&lt;Real, Int&gt;::set_temperature</a>(Real temperature_){</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    this-&gt;temperature = temperature_;}</div>
</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span> </div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00159" data-start="{" data-end="}">
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a1b4c32b733c0cb9dd4a84ff3e3430c71">  159</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmanipulator_1_1_link.html#a1b4c32b733c0cb9dd4a84ff3e3430c71">Link&lt;Real, Int&gt;::set_sensor_stiffness</a>(Real value){</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    this-&gt;sensor_stiffness = value;}</div>
</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00163" data-start="{" data-end="}">
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a15aeb3a6cc93bf28c11cdca1ccddde80">  163</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmanipulator_1_1_link.html#a15aeb3a6cc93bf28c11cdca1ccddde80">Link&lt;Real, Int&gt;::set_transmision_stiffness</a>(Real a0, Real a1, Real a2){</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    this-&gt;a0 = a0; this-&gt;a1 = a1;  this-&gt;a2 = a2;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>}</div>
</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00168" data-start="{" data-end="}">
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#abbd54d1182150c242777f2e65e6529b4">  168</a></span><span class="keywordtype">void</span>  <a class="code hl_function" href="classmanipulator_1_1_link.html#abbd54d1182150c242777f2e65e6529b4">Link&lt;Real, Int&gt;::set_temperature_depandancy</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> status){</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    this-&gt;temperature_depandancy = status;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>}</div>
</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00173" data-start="{" data-end="}">
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a48f17679d53852e69cb32eed8c9ad4e5">  173</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmanipulator_1_1_link.html#a48f17679d53852e69cb32eed8c9ad4e5">Link&lt;Real, Int&gt;::set_mc</a>(<span class="keyword">const</span> Real mx, <span class="keyword">const</span> Real my, <span class="keyword">const</span> Real mz){</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    this-&gt;mc(0) = mx;</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    this-&gt;mc(1) = my;</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    this-&gt;mc(2) = mz;</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>}</div>
</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00180" data-start="{" data-end="}">
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#ab9dbc629c61a4fa570267a1320e8f9a6">  180</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmanipulator_1_1_link.html#ab9dbc629c61a4fa570267a1320e8f9a6">Link&lt;Real, Int&gt;::set_inertia</a>(<span class="keyword">const</span> Real Jm_){</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    this-&gt;Jm=Jm_;</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>}</div>
</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span> </div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00185" data-start="{" data-end="}">
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a71e6e95485bb16de45fbe84193305ed7">  185</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmanipulator_1_1_link.html#a71e6e95485bb16de45fbe84193305ed7">Link&lt;Real, Int&gt;::set_inertia_tensor</a>(<span class="keyword">const</span> Matrix3d I_){</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    this-&gt;I = I_;</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>}</div>
</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span> </div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00190" data-start="{" data-end="}">
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a7374dfa2943e1c7fe30376960829f42a">  190</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmanipulator_1_1_link.html#a7374dfa2943e1c7fe30376960829f42a">Link&lt;Real, Int&gt;::set_static</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> status){</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    this-&gt;static_ =status;</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>}</div>
</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span> </div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a598538427e8ddf574ccd2abce175f03b">  195</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmanipulator_1_1_link.html#a598538427e8ddf574ccd2abce175f03b">Link&lt;Real, Int&gt;::update_time</a>(){this-&gt;t += <a class="code hl_variable" href="namespaceconstant.html#a27ba231c8156b61571d8c3641cef8e5b">constant::TIME_STEP</a>; }</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span> </div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a9ec4d7acdcdf1887d0ecbe0e6f36280d">  198</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmanipulator_1_1_link.html#a9ec4d7acdcdf1887d0ecbe0e6f36280d">Link&lt;Real, Int&gt;::reset_time</a>(){ this-&gt;t =0}</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00201" data-start="{" data-end="}">
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#aaec8c8a468bf1e1b30c11a0f79f269a6">  201</a></span><span class="keywordtype">void</span>  <a class="code hl_function" href="classmanipulator_1_1_link.html#aaec8c8a468bf1e1b30c11a0f79f269a6">Link&lt;Real, Int&gt;::update_qpm</a>(Real current, Real voltage){ </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    update_time&lt;Real,Int&gt;();</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    this-&gt;qpm = this-&gt;kv * voltage; </div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>}</div>
</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span> </div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00207" data-start="{" data-end="}">
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#af6c56d047d5dad1f2b46ce3265aab5b3">  207</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmanipulator_1_1_link.html#af6c56d047d5dad1f2b46ce3265aab5b3">Link&lt;Real, Int&gt;::update_qm</a>(Real current, Real voltage){   </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    update_qpm&lt;Real,Int&gt;(current,voltage);</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    this-&gt;qm += this-&gt;qpm * <a class="code hl_variable" href="namespaceconstant.html#a27ba231c8156b61571d8c3641cef8e5b">constant::TIME_STEP</a>;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>}</div>
</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00213" data-start="{" data-end="}">
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a32e0cbfb3d5b262c2ae89bff79a27bc5">  213</a></span>Real <a class="code hl_function" href="classmanipulator_1_1_link.html#a32e0cbfb3d5b262c2ae89bff79a27bc5">Link&lt;Real, Int&gt;::motor_friction</a>(Real current, Real voltage){</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    update_qm(current, voltage);</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    <span class="keywordflow">return</span> this-&gt;c0+this-&gt;c1*this-&gt;qm*this-&gt;qm+this-&gt;c2*this-&gt;qm*this-&gt;qm*this-&gt;qm;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>}</div>
</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00219" data-start="{" data-end="}">
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a5e4c860525383f47845795c473881b12">  219</a></span>Real  <a class="code hl_function" href="classmanipulator_1_1_link.html#a5e4c860525383f47845795c473881b12">Link&lt;Real, Int&gt;::compute_motor_torque</a>(Real current, Real voltage) <span class="keyword">noexcept</span> {   </div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    <span class="keywordflow">try</span>{</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>        Real torque =  this-&gt;kt * current;</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>         <span class="keywordflow">if</span> (torque &gt; this-&gt;tau_m_max) {</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>            <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Computed torque exceeds maximum allowed value&quot;</span>);</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>        }</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>        <span class="keywordflow">return</span> torque;</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    }</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <span class="keywordflow">catch</span>(<span class="keyword">const</span> std::runtime_error&amp; e){</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        std::cerr &lt;&lt; <span class="stringliteral">&quot;Warning: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        <span class="keywordflow">return</span> this-&gt;tau_m_max;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    }</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>}</div>
</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span> </div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00234" data-start="{" data-end="}">
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a1e12357b3a6542b14df5b5beb384aa71">  234</a></span>Real <a class="code hl_function" href="classmanipulator_1_1_link.html#a1e12357b3a6542b14df5b5beb384aa71">Link&lt;Real, Int&gt;::contact_friction</a>() noexcept {   </div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>    <span class="keywordflow">if</span> (!this-&gt;temperature_depandancy)</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    {   </div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>        <a class="code hl_class" href="classfriction_1_1_lugre.html">friction::Lugre&lt;Real,Int&gt;</a> lugre(this-&gt;sigma0,this-&gt;sigma1,this-&gt;sigma2,</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>        this-&gt;vs,this-&gt;coulomb, this-&gt;stribek);</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>        lugre.<a class="code hl_function" href="classfriction_1_1_lugre.html#a00a2ce5615eea843e087f49cd285afd7">init</a>&lt;Real, Int&gt;();</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>        <span class="keywordflow">return</span> lugre.<a class="code hl_function" href="classfriction_1_1_lugre.html#ae372cf5175606864fb810fff6d66142e">friction_torque</a>&lt;Real, Int&gt;(this-&gt;qp,this-&gt;t);</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    }<span class="keywordflow">else</span>{</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    }</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>}</div>
</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00247" data-start="{" data-end="}">
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a6ca0e50edffb01ddb5da1a14462a465d">  247</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classmanipulator_1_1_link.html#a6ca0e50edffb01ddb5da1a14462a465d">Link&lt;Real, Int&gt;::update_delta_q</a>(Real current , Real voltage) <span class="keyword">noexcept</span> {   </div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    <span class="keywordflow">try</span>{</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>        update_qm&lt;Real,Int&gt;(current, voltage);</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>        <span class="keywordflow">if</span> (this-&gt;ratio &lt;= 0){</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>             <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Non Positive Transmission Ratio Value&quot;</span>); </div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>        }</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>        this-&gt;delta_q = this-&gt;qm-this-&gt;q * 1/this-&gt;ratio;</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    }</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <span class="keywordflow">catch</span>(<span class="keyword">const</span> std::exception&amp; e){</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        std::cerr &lt;&lt; <span class="stringliteral">&quot;Warning: &quot;</span> &lt;&lt; e.what() &lt;&lt; std::endl;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    }</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>}</div>
</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span> </div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Real, <span class="keyword">typename</span> Int&gt;</div>
<div class="foldopen" id="foldopen00261" data-start="{" data-end="}">
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno"><a class="line" href="classmanipulator_1_1_link.html#a2df8778977ac41b35fe9b0291840b696">  261</a></span>Real <a class="code hl_function" href="classmanipulator_1_1_link.html#a2df8778977ac41b35fe9b0291840b696">Link&lt;Real, Int&gt;::compute_stiffness</a>(Real current, Real voltage){</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    update_delta_q&lt;Real,Int&gt;(current, voltage);</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    <span class="keywordflow">return</span> a0+this-&gt;delta_q*a0+a1*this-&gt;delta_q+a2*this-&gt;delta_q*this-&gt;delta_q;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>}</div>
</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span> </div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>}; <span class="comment">// namespace manipulator </span></div>
<div class="ttc" id="aclassfriction_1_1_lugre_html"><div class="ttname"><a href="classfriction_1_1_lugre.html">friction::Lugre</a></div><div class="ttdoc">LuGre friction model class declaration. [1] A New Model For Control of Systems with Friction - 1995.</div><div class="ttdef"><b>Definition</b> lugre_model.hpp:18</div></div>
<div class="ttc" id="aclassfriction_1_1_lugre_html_a00a2ce5615eea843e087f49cd285afd7"><div class="ttname"><a href="classfriction_1_1_lugre.html#a00a2ce5615eea843e087f49cd285afd7">friction::Lugre::init</a></div><div class="ttdeci">void init()</div><div class="ttdoc">intilize the model with null values</div><div class="ttdef"><b>Definition</b> lugre_model.cpp:19</div></div>
<div class="ttc" id="aclassfriction_1_1_lugre_html_ae372cf5175606864fb810fff6d66142e"><div class="ttname"><a href="classfriction_1_1_lugre.html#ae372cf5175606864fb810fff6d66142e">friction::Lugre::friction_torque</a></div><div class="ttdeci">Real friction_torque(Real velocity, Real t)</div><div class="ttdoc">compute the friction torque at time date t</div><div class="ttdef"><b>Definition</b> lugre_model.cpp:44</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a15aeb3a6cc93bf28c11cdca1ccddde80"><div class="ttname"><a href="classmanipulator_1_1_link.html#a15aeb3a6cc93bf28c11cdca1ccddde80">manipulator::Link::set_transmision_stiffness</a></div><div class="ttdeci">void set_transmision_stiffness(Real a0, Real a1, Real a2)</div><div class="ttdoc">set of harmonic drive reducer stiffness coefficents.</div><div class="ttdef"><b>Definition</b> link.cpp:163</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a15cd1b6c7263114342ce987b88f75d0a"><div class="ttname"><a href="classmanipulator_1_1_link.html#a15cd1b6c7263114342ce987b88f75d0a">manipulator::Link::~Link</a></div><div class="ttdeci">~Link()</div><div class="ttdoc">class destructor.</div><div class="ttdef"><b>Definition</b> link.cpp:102</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a1b4c32b733c0cb9dd4a84ff3e3430c71"><div class="ttname"><a href="classmanipulator_1_1_link.html#a1b4c32b733c0cb9dd4a84ff3e3430c71">manipulator::Link::set_sensor_stiffness</a></div><div class="ttdeci">void set_sensor_stiffness(Real value)</div><div class="ttdoc">set of the sensor stiffness value.</div><div class="ttdef"><b>Definition</b> link.cpp:159</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a1e12357b3a6542b14df5b5beb384aa71"><div class="ttname"><a href="classmanipulator_1_1_link.html#a1e12357b3a6542b14df5b5beb384aa71">manipulator::Link::contact_friction</a></div><div class="ttdeci">Real contact_friction()</div><div class="ttdoc">torque in joint general contact phenomenas at time t,</div><div class="ttdef"><b>Definition</b> link.cpp:234</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a1e89f030936b92c8633503848cbc6578"><div class="ttname"><a href="classmanipulator_1_1_link.html#a1e89f030936b92c8633503848cbc6578">manipulator::Link::Link</a></div><div class="ttdeci">Link(const Int joint_type, const Real q, const Real d, const Real a, const Real alpha, const Real mass, const Vector3d r, const Matrix3d I, const Int ratio, const Real couloumb, const Real stribek, const Real damping, const bool static_=false, const Real mx, const Real my, const Real mz, const Real q_max, const Real q_min, const Real joint_offset, const Real Jm, const Real temperature)</div><div class="ttdoc">class full constructor</div><div class="ttdef"><b>Definition</b> link.cpp:6</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a2df8778977ac41b35fe9b0291840b696"><div class="ttname"><a href="classmanipulator_1_1_link.html#a2df8778977ac41b35fe9b0291840b696">manipulator::Link::compute_stiffness</a></div><div class="ttdeci">Real compute_stiffness(Real current, Real voltage)</div><div class="ttdef"><b>Definition</b> link.cpp:261</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a32e0cbfb3d5b262c2ae89bff79a27bc5"><div class="ttname"><a href="classmanipulator_1_1_link.html#a32e0cbfb3d5b262c2ae89bff79a27bc5">manipulator::Link::motor_friction</a></div><div class="ttdeci">Real motor_friction(Real current, Real volatge)</div><div class="ttdoc">compute the DC-brushed motor friction torque</div><div class="ttdef"><b>Definition</b> link.cpp:213</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a48f17679d53852e69cb32eed8c9ad4e5"><div class="ttname"><a href="classmanipulator_1_1_link.html#a48f17679d53852e69cb32eed8c9ad4e5">manipulator::Link::set_mc</a></div><div class="ttdeci">void set_mc(const Real mx, const Real my, const Real mz)</div><div class="ttdoc">set the link center of mass coorduinates vector</div><div class="ttdef"><b>Definition</b> link.cpp:173</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a598538427e8ddf574ccd2abce175f03b"><div class="ttname"><a href="classmanipulator_1_1_link.html#a598538427e8ddf574ccd2abce175f03b">manipulator::Link::update_time</a></div><div class="ttdeci">void update_time()</div><div class="ttdoc">update time state by one time step</div><div class="ttdef"><b>Definition</b> link.cpp:195</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a5e4c860525383f47845795c473881b12"><div class="ttname"><a href="classmanipulator_1_1_link.html#a5e4c860525383f47845795c473881b12">manipulator::Link::compute_motor_torque</a></div><div class="ttdeci">Real compute_motor_torque(Real current, Real volatge)</div><div class="ttdoc">compute the motor output torque</div><div class="ttdef"><b>Definition</b> link.cpp:219</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a6ca0e50edffb01ddb5da1a14462a465d"><div class="ttname"><a href="classmanipulator_1_1_link.html#a6ca0e50edffb01ddb5da1a14462a465d">manipulator::Link::update_delta_q</a></div><div class="ttdeci">void update_delta_q(Real current, Real volatge)</div><div class="ttdoc">estimates the joint torsinal angle</div><div class="ttdef"><b>Definition</b> link.cpp:247</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a71e6e95485bb16de45fbe84193305ed7"><div class="ttname"><a href="classmanipulator_1_1_link.html#a71e6e95485bb16de45fbe84193305ed7">manipulator::Link::set_inertia_tensor</a></div><div class="ttdeci">void set_inertia_tensor(const Matrix3d I_)</div><div class="ttdoc">set the link inertia tensor</div><div class="ttdef"><b>Definition</b> link.cpp:185</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a7374dfa2943e1c7fe30376960829f42a"><div class="ttname"><a href="classmanipulator_1_1_link.html#a7374dfa2943e1c7fe30376960829f42a">manipulator::Link::set_static</a></div><div class="ttdeci">void set_static(const bool status)</div><div class="ttdoc">set the link satuts to static</div><div class="ttdef"><b>Definition</b> link.cpp:190</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a76f32366b2938f97ddb3c08079344f0e"><div class="ttname"><a href="classmanipulator_1_1_link.html#a76f32366b2938f97ddb3c08079344f0e">manipulator::Link::set_kv</a></div><div class="ttdeci">void set_kv(Real kv)</div><div class="ttdoc">DC-Brushed motor constants defalu value = 1.02.</div><div class="ttdef"><b>Definition</b> link.cpp:149</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a7d1dd68c3780d89c1c79c6d307eb5e45"><div class="ttname"><a href="classmanipulator_1_1_link.html#a7d1dd68c3780d89c1c79c6d307eb5e45">manipulator::Link::get_q</a></div><div class="ttdeci">Real get_q() const</div><div class="ttdef"><b>Definition</b> link.cpp:131</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a80f8d5cac771de738b956e1b44e6a740"><div class="ttname"><a href="classmanipulator_1_1_link.html#a80f8d5cac771de738b956e1b44e6a740">manipulator::Link::set_kt</a></div><div class="ttdeci">void set_kt(Real kt)</div><div class="ttdef"><b>Definition</b> link.cpp:152</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_a9ec4d7acdcdf1887d0ecbe0e6f36280d"><div class="ttname"><a href="classmanipulator_1_1_link.html#a9ec4d7acdcdf1887d0ecbe0e6f36280d">manipulator::Link::reset_time</a></div><div class="ttdeci">void reset_time()</div><div class="ttdoc">set time to t0</div><div class="ttdef"><b>Definition</b> link.cpp:198</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_aa870f9c1106573143616db03cf324ee2"><div class="ttname"><a href="classmanipulator_1_1_link.html#aa870f9c1106573143616db03cf324ee2">manipulator::Link::transform</a></div><div class="ttdeci">void transform(const Real &amp;q_)</div><div class="ttdoc">this functions is used to reset the rotation matrix</div><div class="ttdef"><b>Definition</b> link.cpp:105</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_aaec8c8a468bf1e1b30c11a0f79f269a6"><div class="ttname"><a href="classmanipulator_1_1_link.html#aaec8c8a468bf1e1b30c11a0f79f269a6">manipulator::Link::update_qpm</a></div><div class="ttdeci">void update_qpm(Real current, Real voltage)</div><div class="ttdoc">update the motor shaft angular spped (RPM) given the voltage and current values</div><div class="ttdef"><b>Definition</b> link.cpp:201</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_ab2210a63fe14b7923a1a8bf32700366e"><div class="ttname"><a href="classmanipulator_1_1_link.html#ab2210a63fe14b7923a1a8bf32700366e">manipulator::Link::set_q</a></div><div class="ttdeci">void set_q(Real q)</div><div class="ttdoc">set the link joint generalised variable</div><div class="ttdef"><b>Definition</b> link.cpp:140</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_ab9dbc629c61a4fa570267a1320e8f9a6"><div class="ttname"><a href="classmanipulator_1_1_link.html#ab9dbc629c61a4fa570267a1320e8f9a6">manipulator::Link::set_inertia</a></div><div class="ttdeci">void set_inertia(const Real Jm)</div><div class="ttdoc">set the joint global inertia</div><div class="ttdef"><b>Definition</b> link.cpp:180</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_abbd54d1182150c242777f2e65e6529b4"><div class="ttname"><a href="classmanipulator_1_1_link.html#abbd54d1182150c242777f2e65e6529b4">manipulator::Link::set_temperature_depandancy</a></div><div class="ttdeci">void set_temperature_depandancy(const bool status)</div><div class="ttdoc">enable temperture depandent computations</div><div class="ttdef"><b>Definition</b> link.cpp:168</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_aef55bd1f241ef9037058347dbcfe0ffb"><div class="ttname"><a href="classmanipulator_1_1_link.html#aef55bd1f241ef9037058347dbcfe0ffb">manipulator::Link::set_temperature</a></div><div class="ttdeci">void set_temperature(Real temperature_)</div><div class="ttdoc">set manully the joint temperature, if the &quot;temperature_depandancy&quot; is set to false this will not ovve...</div><div class="ttdef"><b>Definition</b> link.cpp:155</div></div>
<div class="ttc" id="aclassmanipulator_1_1_link_html_af6c56d047d5dad1f2b46ce3265aab5b3"><div class="ttname"><a href="classmanipulator_1_1_link.html#af6c56d047d5dad1f2b46ce3265aab5b3">manipulator::Link::update_qm</a></div><div class="ttdeci">void update_qm(Real current, Real voltage)</div><div class="ttdoc">update the angular position at motor shaft from state k to state k+1 given the qpm at state k</div><div class="ttdef"><b>Definition</b> link.cpp:207</div></div>
<div class="ttc" id="alink_8hpp_html"><div class="ttname"><a href="link_8hpp.html">link.hpp</a></div></div>
<div class="ttc" id="anamespaceconstant_html_a27ba231c8156b61571d8c3641cef8e5b"><div class="ttname"><a href="namespaceconstant.html#a27ba231c8156b61571d8c3641cef8e5b">constant::TIME_STEP</a></div><div class="ttdeci">const Real TIME_STEP</div><div class="ttdef"><b>Definition</b> constant.hpp:39</div></div>
<div class="ttc" id="anamespacedamping_html"><div class="ttname"><a href="namespacedamping.html">damping</a></div><div class="ttdef"><b>Definition</b> damping_model.cpp:3</div></div>
<div class="ttc" id="anamespacemanipulator_html"><div class="ttname"><a href="namespacemanipulator.html">manipulator</a></div><div class="ttdef"><b>Definition</b> kinova.hpp:5</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5c18d500453e47dc241e193c247c607d.html">DynaMapp</a></li><li class="navelem"><a class="el" href="dir_9cc3dcdb1c3ade397aba953b4c4d541e.html">manipulator</a></li><li class="navelem"><a class="el" href="link_8cpp.html">link.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
